<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Chat demo</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/skeleton.css">
	<link rel="stylesheet" href="css/styles.css">
</head>
<body>
	<div class="container">
		<div class="row">

			<div class="twelve columns">
				<ul id="messages-list" class="messages">
				</ul>

				<div class="row">
					<div class="ten columns">
						<input class="u-full-width" id="input-text" type="text">
					</div>
					<div class="two columns">
						<button id="send-btn">Send!</button>
					</div>
				</div>
			</div>

		</div>
	</div>

	<script src="/socket.io/socket.io.js"></script>
	<script> 

		window.onload = setup;

		const socket = io(),
			  textInput = document.getElementById('input-text'),
			  button = document.getElementById('send-btn'),
			  ul = document.getElementById('messages-list');

		function addMessage( msg ) {
			let newElem;
			newElem = document.createElement('li');
			newElem.innerHTML = msg;
			ul.appendChild( newElem );

		}

		function setup() {
			button.addEventListener('click', function() {
				socket.emit('message', textInput.value );
			});

			socket.on('message', function( msg ) {
				addMessage( msg );
			})
		}

	</script>
</body>
</html>